{
  "version": 4,
  "terraform_version": "1.0.0",
  "serial": 50,
  "lineage": "f89bf727-f9dc-62d0-1b75-2f79b29e55de",
  "outputs": {},
  "resources": [
    {
      "module": "module.relational_databases_alerts",
      "mode": "managed",
      "type": "newrelic_alert_channel",
      "name": "ops_engine",
      "provider": "module.relational_databases_alerts.provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": null,
            "config": [
              {
                "api_key": "31a5ed3e-6631-484c-b0af-8e537998c4bf",
                "auth_password": "",
                "auth_type": "",
                "auth_username": "",
                "base_url": "",
                "channel": "",
                "headers": null,
                "headers_string": "",
                "include_json_attachment": "",
                "key": "",
                "payload": null,
                "payload_string": "",
                "payload_type": "",
                "recipients": "",
                "region": "US",
                "route_key": "",
                "service_key": "",
                "tags": "",
                "teams": "",
                "url": "",
                "user_id": ""
              }
            ],
            "id": "6827982",
            "name": "avaliacoes-ops-engine",
            "type": "opsgenie"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.relational_databases_alerts",
      "mode": "managed",
      "type": "newrelic_alert_policy",
      "name": "ops_engine_channels",
      "provider": "module.relational_databases_alerts.provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": 3103539,
            "channel_ids": [
              6827982
            ],
            "id": "3441130",
            "incident_preference": "PER_CONDITION",
            "name": "avaliacoes"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.relational_databases_alerts.newrelic_alert_channel.ops_engine"
          ]
        }
      ]
    },
    {
      "module": "module.relational_databases_alerts",
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "cpu_peak_percentage",
      "provider": "module.relational_databases_alerts.provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": 3103539,
            "aggregation_delay": "120",
            "aggregation_method": "event_flow",
            "aggregation_timer": null,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": true,
            "critical": [
              {
                "duration": 0,
                "operator": "equals",
                "threshold": 90,
                "threshold_duration": 900,
                "threshold_occurrences": "at_least_once",
                "time_function": ""
              }
            ],
            "description": "CPU Database Percentage Peak 'prd-dam-1'",
            "enabled": true,
            "entity_guid": "MzEwMzUzOXxBSU9QU3xDT05ESVRJT058MjY5NTAzNDU",
            "expiration_duration": 300,
            "fill_option": "none",
            "fill_value": 0,
            "id": "3441130:26950345",
            "name": "CPU Database Percentage Peak 'prd-dam-1'",
            "nrql": [
              {
                "evaluation_offset": 0,
                "query": "SELECT max(`aws.rds.CPUUtilization`) FROM Metric FACET `aws.rds.DBInstanceIdentifier` where  aws.rds.DBInstanceIdentifier =  'prd-dam-1'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "policy_id": 3441130,
            "runbook_url": "",
            "slide_by": null,
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": "TWENTY_FOUR_HOURS",
            "violation_time_limit_seconds": 86400,
            "warning": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.relational_databases_alerts.newrelic_alert_channel.ops_engine",
            "module.relational_databases_alerts.newrelic_alert_policy.ops_engine_channels",
            "module.relational_databases_alerts.newrelic_alert_policy.slack_channels"
          ]
        }
      ]
    },
    {
      "module": "module.relational_databases_alerts",
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "cpu_percentage_equal",
      "provider": "module.relational_databases_alerts.provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": 3103539,
            "aggregation_delay": "120",
            "aggregation_method": "event_flow",
            "aggregation_timer": null,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": true,
            "critical": [
              {
                "duration": 0,
                "operator": "equals",
                "threshold": 70,
                "threshold_duration": 900,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ],
            "description": "CPU Database Percentage 'prd-dam-1'",
            "enabled": true,
            "entity_guid": "MzEwMzUzOXxBSU9QU3xDT05ESVRJT058MjY5NTAzNDQ",
            "expiration_duration": 300,
            "fill_option": "none",
            "fill_value": 0,
            "id": "3441130:26950344",
            "name": "CPU Database Percentage 'prd-dam-1'",
            "nrql": [
              {
                "evaluation_offset": 0,
                "query": "SELECT average(`aws.rds.CPUUtilization`) FROM Metric FACET `aws.rds.DBInstanceIdentifier` WHERE aws.rds.DBInstanceIdentifier =  'prd-dam-1'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "policy_id": 3441130,
            "runbook_url": "",
            "slide_by": null,
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": "TWENTY_FOUR_HOURS",
            "violation_time_limit_seconds": 86400,
            "warning": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.relational_databases_alerts.newrelic_alert_channel.ops_engine",
            "module.relational_databases_alerts.newrelic_alert_policy.ops_engine_channels",
            "module.relational_databases_alerts.newrelic_alert_policy.slack_channels"
          ]
        }
      ]
    },
    {
      "module": "module.relational_databases_alerts",
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "database_connection_equal",
      "provider": "module.relational_databases_alerts.provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": 3103539,
            "aggregation_delay": "120",
            "aggregation_method": "event_flow",
            "aggregation_timer": null,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": true,
            "critical": [
              {
                "duration": 0,
                "operator": "equals",
                "threshold": 30,
                "threshold_duration": 900,
                "threshold_occurrences": "at_least_once",
                "time_function": ""
              }
            ],
            "description": "Connection Database 'prd-dam-1'",
            "enabled": true,
            "entity_guid": "MzEwMzUzOXxBSU9QU3xDT05ESVRJT058MjY5NTAzNDY",
            "expiration_duration": 300,
            "fill_option": "none",
            "fill_value": 0,
            "id": "3441130:26950346",
            "name": "Connection Database 'prd-dam-1'",
            "nrql": [
              {
                "evaluation_offset": 0,
                "query": "SELECT max(`aws.rds.DatabaseConnections`) FROM Metric FACET `aws.rds.DBInstanceIdentifier` WHERE aws.rds.DBInstanceIdentifier =  'prd-dam-1'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "policy_id": 3441130,
            "runbook_url": "",
            "slide_by": null,
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": "TWENTY_FOUR_HOURS",
            "violation_time_limit_seconds": 86400,
            "warning": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.relational_databases_alerts.newrelic_alert_channel.ops_engine",
            "module.relational_databases_alerts.newrelic_alert_policy.ops_engine_channels",
            "module.relational_databases_alerts.newrelic_alert_policy.slack_channels"
          ]
        }
      ]
    },
    {
      "module": "module.relational_databases_alerts",
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "database_lock_equal",
      "provider": "module.relational_databases_alerts.provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": 3103539,
            "aggregation_delay": "120",
            "aggregation_method": "event_flow",
            "aggregation_timer": null,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": true,
            "critical": [
              {
                "duration": 0,
                "operator": "equals",
                "threshold": 15,
                "threshold_duration": 900,
                "threshold_occurrences": "at_least_once",
                "time_function": ""
              }
            ],
            "description": "DeadLock Database 'prd-dam-1'",
            "enabled": true,
            "entity_guid": "MzEwMzUzOXxBSU9QU3xDT05ESVRJT058MjY5NTAzNDc",
            "expiration_duration": 300,
            "fill_option": "none",
            "fill_value": 0,
            "id": "3441130:26950347",
            "name": "DeadLock Database 'prd-dam-1'",
            "nrql": [
              {
                "evaluation_offset": 0,
                "query": "SELECT max(`aws.rds.Deadlocks`) FROM Metric FACET `aws.rds.DBInstanceIdentifier` where aws.rds.DBInstanceIdentifier =  'prd-dam-1'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "policy_id": 3441130,
            "runbook_url": "",
            "slide_by": null,
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": "TWENTY_FOUR_HOURS",
            "violation_time_limit_seconds": 86400,
            "warning": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.relational_databases_alerts.newrelic_alert_channel.ops_engine",
            "module.relational_databases_alerts.newrelic_alert_policy.ops_engine_channels",
            "module.relational_databases_alerts.newrelic_alert_policy.slack_channels"
          ]
        }
      ]
    }
  ]
}
